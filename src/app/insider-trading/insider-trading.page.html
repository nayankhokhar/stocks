<ion-content [fullscreen]="true">
  <div class="p-3">
    <table class="table table-striped table-bordered">
      <thead>
        <tr>
          <th scope="col">#</th>
          <th scope="col">Company</th>
          <th scope="col">Holding</th>
          <th scope="col">Total Qty</th>
          <th scope="col">Total Value</th>
          <th scope="col">Avg. Price</th>
          <th scope="col">Latest Date</th>
          <th scope="col">Transactions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let data of insiderTradingFiltered; let i = index">
          <th scope="row">{{ i + 1 }}</th>
          <td style="color: green; font-weight: 700;">{{ data.companyName }}</td>
          <td>
            <span *ngIf="data.promoterShareHolding !== undefined && data.promoterShareHolding !== null; else noData"
              [ngStyle]="{'color': data.promoterShareHolding > 50 ? 'green' : 'red'}">
              {{ data.promoterShareHolding }}%
            </span>
            <ng-template #noData>-</ng-template>
          </td>
          <td>{{ convertToReadableIndianFormat(data.totalQty) }}</td>
          <td style="color: blue; font-weight: 700;">{{ convertToReadableIndianFormat(data.totalValue) }}</td>
          <td>{{ formatIndianCurrency(data.avgPrice) }}</td>
          <td>{{ data.latestBroadcastDate }}</td>
          <td class="p-0">
            <table class="table table-striped table-bordered table-sm mb-0">
              <thead>
                <tr>
                  <th>Qty</th>
                  <th>Value</th>
                  <th>Avg</th>
                  <th>Date</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let t of data.transactions">
                  <td>{{ convertToReadableIndianFormat(t.qty) }}</td>
                  <td>{{ convertToReadableIndianFormat(t.value) }}</td>
                  <td>{{ formatIndianCurrency(t.avgPrice) }}</td>
                  <td>{{ t.broadcastDate }}</td>
                </tr>
              </tbody>
            </table>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</ion-content>


<ion-footer>
  <ion-toolbar class="ion-no-padding">
    <input #fileInput type="file" (change)="pickFile($event)" accept=".csv" multiple hidden>
    <ion-button expand="block" (click)="fileInput.click()" color="secondary" style="margin: 5px;"
      class="custom-text-color">Select CSV
      Files</ion-button>
  </ion-toolbar>
</ion-footer>